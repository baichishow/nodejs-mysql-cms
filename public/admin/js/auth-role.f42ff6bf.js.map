{"version":3,"file":"js/auth-role.f42ff6bf.js","mappings":"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","sources":["webpack://vue-cms-admin/./src/views/Auth/Role.vue","webpack://vue-cms-admin/src/views/Auth/Role.vue","webpack://vue-cms-admin/./src/views/Auth/Role.vue?9180","webpack://vue-cms-admin/./src/views/Auth/Role.vue?6d64"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',[_c('el-row',[_c('el-col',{attrs:{\"span\":16}},[_c('el-card',{staticClass:\"table-card\"},[_c('div',{staticClass:\"header\",attrs:{\"slot\":\"header\"},slot:\"header\"},[_c('span',[_vm._v(\"角色管理\")]),_c('el-button',{attrs:{\"icon\":\"el-icon-circle-plus-outline\",\"plain\":\"\",\"type\":\"primary\"},on:{\"click\":function($event){_vm.insert_dialog_visible = true}}},[_vm._v(\" 添加角色 \")])],1),_c('el-table',{attrs:{\"data\":_vm.tableData}},[_c('el-table-column',{attrs:{\"prop\":\"role_id\",\"label\":\"#\",\"width\":\"60\"}}),_c('el-table-column',{attrs:{\"prop\":\"role_name\",\"label\":\"角色名称\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-tag',[_vm._v(_vm._s(scope.row.role_name))])]}}])}),_c('el-table-column',{attrs:{\"prop\":\"role_code\",\"label\":\"角色代码\"}}),_c('el-table-column',{attrs:{\"prop\":\"role_description\",\"label\":\"角色描述\"}}),_c('el-table-column',{attrs:{\"label\":\"操作\",\"width\":\"180\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-button',{attrs:{\"disabled\":scope.row.editable === 0,\"icon\":\"el-icon-edit\",\"plain\":\"\",\"type\":\"primary\"},on:{\"click\":function($event){return _vm.openEditDialog(scope.row,scope.$index)}}}),_c('el-button',{attrs:{\"disabled\":scope.row.editable === 0,\"icon\":\"el-icon-delete\",\"plain\":\"\",\"type\":\"danger\"},on:{\"click\":function($event){return _vm.handleRemoveRole(scope.row.role_id,scope.$index)}}}),_c('el-button',{attrs:{\"type\":\"primary\",\"plain\":\"\",\"icon\":\"el-icon-setting\"},on:{\"click\":function($event){return _vm.openSettingDrawer(scope.row.role_id)}}})]}}])})],1)],1)],1)],1),_c('el-dialog',{attrs:{\"title\":\"添加角色\",\"visible\":_vm.insert_dialog_visible},on:{\"update:visible\":function($event){_vm.insert_dialog_visible=$event},\"close\":function($event){return _vm.handleDialogClose('insert_form')}}},[_c('el-form',{ref:\"insert_form\",attrs:{\"rules\":_vm.rules,\"model\":_vm.insert_form,\"label-width\":\"80px\"}},[_c('el-form-item',{attrs:{\"label\":\"角色名称\",\"prop\":\"role_name\"}},[_c('el-input',{model:{value:(_vm.insert_form.role_name),callback:function ($$v) {_vm.$set(_vm.insert_form, \"role_name\", $$v)},expression:\"insert_form.role_name\"}})],1),_c('el-form-item',{attrs:{\"label\":\"角色代码\",\"prop\":\"role_code\"}},[_c('el-input',{attrs:{\"placeholder\":\"请输入大写英文的角色代码\"},model:{value:(_vm.insert_form.role_code),callback:function ($$v) {_vm.$set(_vm.insert_form, \"role_code\", $$v)},expression:\"insert_form.role_code\"}})],1),_c('el-form-item',{attrs:{\"label\":\"角色描述\",\"prop\":\"role_description\"}},[_c('el-input',{attrs:{\"placeholder\":\"请输入角色的说明文字\"},model:{value:(_vm.insert_form.role_description),callback:function ($$v) {_vm.$set(_vm.insert_form, \"role_description\", $$v)},expression:\"insert_form.role_description\"}})],1)],1),_c('div',{attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":function($event){_vm.insert_dialog_visible = false}}},[_vm._v(\"取 消\")]),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.handleInsertRole}},[_vm._v(\"确 定\")])],1)],1),_c('el-dialog',{attrs:{\"title\":\"编辑角色\",\"visible\":_vm.edit_dialog_visible},on:{\"update:visible\":function($event){_vm.edit_dialog_visible=$event},\"close\":function($event){return _vm.handleDialogClose('edit_form')}}},[_c('el-form',{ref:\"edit_form\",attrs:{\"rules\":_vm.rules,\"model\":_vm.edit_form,\"label-width\":\"80px\"}},[_c('el-form-item',{attrs:{\"label\":\"角色名称\",\"prop\":\"role_name\"}},[_c('el-input',{model:{value:(_vm.edit_form.role_name),callback:function ($$v) {_vm.$set(_vm.edit_form, \"role_name\", $$v)},expression:\"edit_form.role_name\"}})],1),_c('el-form-item',{attrs:{\"label\":\"角色代码\",\"prop\":\"role_code\"}},[_c('el-input',{attrs:{\"placeholder\":\"请输入大写英文的角色代码\"},model:{value:(_vm.edit_form.role_code),callback:function ($$v) {_vm.$set(_vm.edit_form, \"role_code\", $$v)},expression:\"edit_form.role_code\"}})],1),_c('el-form-item',{attrs:{\"label\":\"角色描述\",\"prop\":\"role_description\"}},[_c('el-input',{attrs:{\"placeholder\":\"请输入角色的说明文字\"},model:{value:(_vm.edit_form.role_description),callback:function ($$v) {_vm.$set(_vm.edit_form, \"role_description\", $$v)},expression:\"edit_form.role_description\"}})],1)],1),_c('div',{attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":function($event){_vm.edit_dialog_visible = false}}},[_vm._v(\"取 消\")]),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.handleEditRole}},[_vm._v(\"保 存\")])],1)],1),_c('el-dialog',{attrs:{\"title\":\"设置角色权限\",\"visible\":_vm.setting_visible},on:{\"update:visible\":function($event){_vm.setting_visible=$event}}},[_c('el-steps',{attrs:{\"active\":_vm.current_step,\"finish-status\":\"success\",\"align-center\":\"\"}},[_c('el-step',{attrs:{\"title\":\"路由权限\"}}),_c('el-step',{attrs:{\"title\":\"菜单、操作权限\"}})],1),_c('el-tree',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.current_step===0),expression:\"current_step===0\"}],ref:\"route_tree\",attrs:{\"data\":_vm.route_tree,\"check-strictly\":_vm.check_strictly,\"show-checkbox\":\"\",\"highlight-current\":\"\",\"default-expand-all\":\"\",\"node-key\":\"menu_id\",\"props\":_vm.route_props}}),_c('el-tree',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.current_step===1),expression:\"current_step===1\"}],ref:\"menu_tree\",attrs:{\"data\":_vm.menu_tree,\"check-strictly\":_vm.check_strictly,\"show-checkbox\":\"\",\"highlight-current\":\"\",\"default-expand-all\":\"\",\"node-key\":\"menu_id\",\"props\":_vm.menu_props}}),_c('div',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":function($event){_vm.dialogVisible = false}}},[_vm._v(\"取 消\")]),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":function($event){_vm.dialogVisible = false}}},[_vm._v(\"确 定\")])],1)],1),_c('el-drawer',{attrs:{\"title\":\"设置角色菜单\",\"size\":\"25%\",\"direction\":\"rtl\"},on:{\"open\":_vm.handleSetCheckedMenu,\"close\":function($event){_vm.check_strictly = true}}},[_c('div',{staticClass:\"am-padding-horizontal-xl setting-card\"},[_c('div',{staticClass:\"footer\"},[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.handleSetRoleMenu}},[_vm._v(\"保存\")]),_c('el-button',{on:{\"click\":function($event){_vm.setting_visible = false}}},[_vm._v(\"取消\")])],1)])])],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div>\r\n    <el-row>\r\n      <el-col :span=\"16\">\r\n        <el-card class=\"table-card\">\r\n          <div slot=\"header\" class=\"header\">\r\n            <span>角色管理</span>\r\n            <el-button @click=\"insert_dialog_visible = true\" icon=\"el-icon-circle-plus-outline\" plain type=\"primary\">\r\n              添加角色\r\n            </el-button>\r\n          </div>\r\n          <el-table :data=\"tableData\">\r\n            <el-table-column prop=\"role_id\" label=\"#\" width=\"60\">\r\n            </el-table-column>\r\n            <el-table-column prop=\"role_name\" label=\"角色名称\">\r\n              <template slot-scope=\"scope\">\r\n                <el-tag>{{ scope.row.role_name }}</el-tag>\r\n              </template>\r\n            </el-table-column>\r\n            <el-table-column prop=\"role_code\" label=\"角色代码\">\r\n            </el-table-column>\r\n            <el-table-column prop=\"role_description\" label=\"角色描述\">\r\n            </el-table-column>\r\n            <el-table-column label=\"操作\" width=\"180\">\r\n              <template slot-scope=\"scope\">\r\n                <el-button :disabled=\"scope.row.editable === 0\" @click=\"openEditDialog(scope.row,scope.$index)\"\r\n                           icon=\"el-icon-edit\" plain type=\"primary\">\r\n                </el-button>\r\n                <el-button :disabled=\"scope.row.editable === 0\"\r\n                           @click=\"handleRemoveRole(scope.row.role_id,scope.$index)\"\r\n                           icon=\"el-icon-delete\" plain type=\"danger\">\r\n                </el-button>\r\n                <el-button @click=\"openSettingDrawer(scope.row.role_id)\" type=\"primary\" plain icon=\"el-icon-setting\">\r\n                </el-button>\r\n              </template>\r\n            </el-table-column>\r\n          </el-table>\r\n        </el-card>\r\n      </el-col>\r\n    </el-row>\r\n    <!-- 添加角色 -->\r\n    <el-dialog title=\"添加角色\" :visible.sync=\"insert_dialog_visible\" @close=\"handleDialogClose('insert_form')\">\r\n      <el-form ref=\"insert_form\" :rules=\"rules\" :model=\"insert_form\" label-width=\"80px\">\r\n        <el-form-item label=\"角色名称\" prop=\"role_name\">\r\n          <el-input v-model=\"insert_form.role_name\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"角色代码\" prop=\"role_code\">\r\n          <el-input v-model=\"insert_form.role_code\" placeholder=\"请输入大写英文的角色代码\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"角色描述\" prop=\"role_description\">\r\n          <el-input v-model=\"insert_form.role_description\" placeholder=\"请输入角色的说明文字\"></el-input>\r\n        </el-form-item>\r\n      </el-form>\r\n      <div slot=\"footer\">\r\n        <el-button @click=\"insert_dialog_visible = false\">取 消</el-button>\r\n        <el-button @click=\"handleInsertRole\" type=\"primary\">确 定</el-button>\r\n      </div>\r\n    </el-dialog>\r\n    <!-- 编辑角色 -->\r\n    <el-dialog title=\"编辑角色\" :visible.sync=\"edit_dialog_visible\" @close=\"handleDialogClose('edit_form')\">\r\n      <el-form ref=\"edit_form\" :rules=\"rules\" :model=\"edit_form\" label-width=\"80px\">\r\n        <el-form-item label=\"角色名称\" prop=\"role_name\">\r\n          <el-input v-model=\"edit_form.role_name\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"角色代码\" prop=\"role_code\">\r\n          <el-input v-model=\"edit_form.role_code\" placeholder=\"请输入大写英文的角色代码\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"角色描述\" prop=\"role_description\">\r\n          <el-input v-model=\"edit_form.role_description\" placeholder=\"请输入角色的说明文字\"></el-input>\r\n        </el-form-item>\r\n      </el-form>\r\n      <div slot=\"footer\">\r\n        <el-button @click=\"edit_dialog_visible = false\">取 消</el-button>\r\n        <el-button @click=\"handleEditRole\" type=\"primary\">保 存</el-button>\r\n      </div>\r\n    </el-dialog>\r\n    <!-- 配置角色--路由权限、菜单权限、操作权限 -->\r\n    <el-dialog title=\"设置角色权限\" :visible.sync=\"setting_visible\">\r\n      <el-steps :active=\"current_step\" finish-status=\"success\" align-center>\r\n        <el-step title=\"路由权限\"></el-step>\r\n        <el-step title=\"菜单、操作权限\"></el-step>\r\n      </el-steps>\r\n      <el-tree v-show=\"current_step===0\" :data=\"route_tree\" ref=\"route_tree\" :check-strictly=\"check_strictly\"\r\n               show-checkbox highlight-current\r\n               default-expand-all node-key=\"menu_id\" :props=\"route_props\">\r\n      </el-tree>\r\n      <el-tree v-show=\"current_step===1\" :data=\"menu_tree\" ref=\"menu_tree\" :check-strictly=\"check_strictly\"\r\n               show-checkbox highlight-current\r\n               default-expand-all node-key=\"menu_id\" :props=\"menu_props\">\r\n      </el-tree>\r\n      <div slot=\"footer\" class=\"dialog-footer\">\r\n        <el-button @click=\"dialogVisible = false\">取 消</el-button>\r\n        <el-button type=\"primary\" @click=\"dialogVisible = false\">确 定</el-button>\r\n      </div>\r\n    </el-dialog>\r\n\r\n    <el-drawer title=\"设置角色菜单\" @open=\"handleSetCheckedMenu\" @close=\"check_strictly = true\"\r\n               size=\"25%\" direction=\"rtl\">\r\n      <div class=\"am-padding-horizontal-xl setting-card\">\r\n\r\n        <div class=\"footer\">\r\n          <!-- :disabled=\"current_role_id===1\"-->\r\n          <el-button @click=\"handleSetRoleMenu\" type=\"primary\">保存</el-button>\r\n          <el-button @click=\"setting_visible = false\">取消</el-button>\r\n        </div>\r\n      </div>\r\n    </el-drawer>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { Role, Menu, Route } from '@/api/';\r\n\r\nexport default {\r\n  name: \"Role\",\r\n  data() {\r\n    return {\r\n      tableData: [],\r\n      insert_dialog_visible: false,\r\n      edit_dialog_visible: false,\r\n      setting_visible: false,\r\n      insert_form: {\r\n        role_name: '',\r\n        role_code: '',\r\n        role_description: '',\r\n      },\r\n      edit_form: {\r\n        role_id: '',\r\n        role_name: '',\r\n        role_code: '',\r\n        role_description: '',\r\n      },\r\n      //当前操作行row的索引\r\n      current_index: '',\r\n      //当前操作行row的角色 role_id\r\n      current_role_id: '',\r\n      rules: {\r\n        role_name: [{ required: true, message: \"请输入角色名称\", trigger: 'blur' }],\r\n        role_code: [{ required: true, message: \"请输入大写英文的角色代码\", trigger: 'blur' }],\r\n        role_description: [{ required: true, message: \"请输入角色的说明文字\", trigger: 'blur' }],\r\n      },\r\n      // 步骤条\r\n      current_step: 0,\r\n      // 路由树形结构\r\n      route_tree: [],\r\n      menu_tree: [],\r\n      // 是否严格的遵循父子不互相关联\r\n      check_strictly: true,\r\n      route_props: { label: 'permission_remark' },\r\n      menu_props: { label: 'menu_name' },\r\n    }\r\n  },\r\n  created() {\r\n    document.title = \"角色管理\";\r\n    // 角色列表\r\n    this.loadRoleList();\r\n    // 路由 tree 结构\r\n    this.loadRouteList();\r\n    //  菜单 tree 结构\r\n    this.loadMenuList();\r\n  },\r\n  methods: {\r\n    // 加载角色列表\r\n    async loadRoleList() {\r\n      let { status, data } = await Role.list()\r\n      if (status) {\r\n        this.tableData = data;\r\n      }\r\n    },\r\n    // 打开编辑弹窗\r\n    openEditDialog(role, index) {\r\n      this.edit_form = { ...role };\r\n      this.edit_dialog_visible = true;\r\n      //缓存当前row行索引\r\n      this.current_index = index;\r\n    },\r\n    // 编辑角色\r\n    handleEditRole() {\r\n      this.$refs.edit_form.validate(async (valid) => {\r\n        if (valid) {\r\n          let { status, msg } = await Role.edit(this.edit_form.role_id, { ...this.edit_form });\r\n          if (status) {\r\n            // 更新DOM\r\n            this.$set(this.tableData, this.current_index, { ...this.edit_form });\r\n            this.$message.success(msg);\r\n            this.edit_dialog_visible = false;\r\n          } else {\r\n            this.$message.error(msg);\r\n          }\r\n        }\r\n      });\r\n    },\r\n    // 删除角色\r\n    async handleRemoveRole(role_id, index) {\r\n      this.$confirm('此操作将永久删除该角色, 是否继续?', { type: 'warning' })\r\n          .then(async () => {\r\n            // 删除角色\r\n            let { status, msg } = await Role.remove(role_id);\r\n            if (status) {\r\n              this.tableData.splice(index, 1);\r\n              this.$message.success(msg);\r\n            } else {\r\n              this.$message.error(msg);\r\n            }\r\n          })\r\n          .catch(() => {\r\n            this.$message.info('取消成功！');\r\n          });\r\n    },\r\n    // 添加角色\r\n    handleInsertRole() {\r\n      this.$refs.insert_form.validate(async (valid) => {\r\n        if (valid) {\r\n          let { status, msg, data } = await Role.insert({ ...this.insert_form });\r\n          if (status) {\r\n            this.tableData.push({ ...data, ...this.insert_form });\r\n            this.insert_dialog_visible = false;\r\n          }\r\n        }\r\n      });\r\n    },\r\n    // 关闭弹窗\r\n    handleDialogClose(form) {\r\n      this.$refs[form].resetFields();\r\n    },\r\n    // 加载所有路由权限\r\n    async loadRouteList() {\r\n      let { status, data } = await Route.loadAll({ type: 'tree' })\r\n      if (status) {\r\n        this.route_tree = data;\r\n      }\r\n    },\r\n    // 加载所有菜单、操作权限\r\n    async loadMenuList() {\r\n      let { status, data } = await Menu.loadAll({ type: 'tree' })\r\n      if (status) {\r\n        this.menu_tree = data;\r\n      }\r\n    },\r\n    // 开启抽屉\r\n    async openSettingDrawer(role_id) {\r\n      // 开启drawer\r\n      this.setting_visible = true;\r\n      // 缓存当前角色role的 role_id\r\n      this.current_role_id = role_id;\r\n    },\r\n    // 设置选中的菜单\r\n    async handleSetCheckedMenu() {\r\n      // 根据角色加载对应菜单\r\n      let { status, data } = await Role.menu({ role_id: this.current_role_id, type: 'flat' });\r\n      if (status) {\r\n        // 转化为选中的菜单id\r\n        let checked_keys = data.map((menu) => menu.id);\r\n        // 设置选中的菜单\r\n        this.$refs.tree.setCheckedKeys(checked_keys);\r\n        // 还原选中状态之后，设置父子节点互相关联\r\n        this.check_strictly = false;\r\n      }\r\n    },\r\n    // 保存菜单设置\r\n    async handleSetRoleMenu() {\r\n      // 获取当前选中的node节点（包含半选中父级节点）\r\n      let checked_nodes = this.$refs.tree.getCheckedNodes(false, true);\r\n      // 转化为id数组\r\n      let checked_keys = checked_nodes.map((menu) => menu.id);\r\n      // 发送菜单配置\r\n      let { status, msg } = await Role.setMenu({ id: this.current_role_id, menus: checked_keys });\r\n      if (status) {\r\n        this.$message.success(msg);\r\n        // 关闭drawer\r\n        this.setting_visible = false;\r\n      } else {\r\n        this.$message.error(msg);\r\n      }\r\n    },\r\n  }\r\n}\r\n// TODO 设置角色需要重新设计，角色增加多个字段，editable\r\n</script>\r\n\r\n<style lang=\"less\">\r\n.table-card {\r\n  .header {\r\n    display: flex;\r\n    justify-content: space-between;\r\n    align-items: center;\r\n  }\r\n}\r\n\r\n.setting-card {\r\n  .footer {\r\n    position: absolute;\r\n    bottom: 20px;\r\n    left: 32px;\r\n  }\r\n}\r\n</style>\r\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Role.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Role.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Role.vue?vue&type=template&id=a1f211c8&\"\nimport script from \"./Role.vue?vue&type=script&lang=js&\"\nexport * from \"./Role.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Role.vue?vue&type=style&index=0&id=a1f211c8&prod&lang=less&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_c","_self","attrs","staticClass","slot","_v","on","$event","insert_dialog_visible","tableData","scopedSlots","_u","key","fn","scope","_s","row","role_name","editable","openEditDialog","$index","handleRemoveRole","role_id","openSettingDrawer","handleDialogClose","ref","rules","insert_form","model","value","callback","$$v","$set","expression","role_code","role_description","handleInsertRole","edit_dialog_visible","edit_form","handleEditRole","setting_visible","current_step","directives","name","rawName","route_tree","check_strictly","route_props","menu_tree","menu_props","dialogVisible","handleSetCheckedMenu","handleSetRoleMenu","staticRenderFns","data","current_index","current_role_id","required","message","trigger","label","created","document","title","loadRoleList","loadRouteList","loadMenuList","methods","status","Role","role","index","$refs","validate","valid","msg","$message","success","error","$confirm","type","then","splice","catch","info","push","form","resetFields","Route","Menu","checked_keys","map","menu","id","tree","setCheckedKeys","checked_nodes","getCheckedNodes","menus","component"],"sourceRoot":""}
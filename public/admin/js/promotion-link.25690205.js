"use strict";(self["webpackChunkvue_cms_admin"]=self["webpackChunkvue_cms_admin"]||[]).push([[323],{2905:function(e,t,i){i.r(t),i.d(t,{default:function(){return d}});var l=function(){var e=this,t=e._self._c;return t("el-card",{staticClass:"table-card"},[t("div",{staticClass:"header",attrs:{slot:"header"},slot:"header"},[t("span",[e._v("友情链接")]),t("el-button",{attrs:{plain:"",type:"primary",icon:"el-icon-circle-plus-outline"},on:{click:function(t){e.insert_dialog_visible=!0}}},[e._v(" 添加链接 ")])],1),t("el-table",{attrs:{data:e.tableData}},[t("el-table-column",{attrs:{prop:"link_id",label:"#",width:"40"}}),t("el-table-column",{attrs:{prop:"title",label:"链接标题"}}),t("el-table-column",{attrs:{prop:"url",label:"网站地址",width:"300"},scopedSlots:e._u([{key:"default",fn:function(i){return[t("el-link",{attrs:{href:"#",target:"_blank"}},[e._v(e._s(i.row.url))])]}}])}),t("el-table-column",{attrs:{prop:"link_order",label:"排序数字"}}),t("el-table-column",{attrs:{label:"状态"},scopedSlots:e._u([{key:"default",fn:function(i){return[t("el-tag",{attrs:{type:1===i.row.usable?"success":"info"}},[e._v(" "+e._s(1===i.row.usable?"启用":"禁用")+" ")])]}}])}),t("el-table-column",{attrs:{prop:"create_time",label:"添加日期"}}),t("el-table-column",{attrs:{label:"操作",width:"280"},scopedSlots:e._u([{key:"default",fn:function(i){return[t("el-button",{attrs:{icon:"el-icon-edit",type:"primary",plain:""},on:{click:function(t){return e.openEditDialog(i.row)}}},[e._v("编辑")]),t("el-button",{attrs:{icon:"el-icon-switch-button",type:1===i.row.usable?"info":"success",plain:""},on:{click:function(t){return e.handleSwitch(i.row)}}},[e._v(" "+e._s(1===i.row.usable?"禁用":"启用")+" ")]),t("el-button",{attrs:{icon:"el-icon-delete",type:"danger",plain:""},on:{click:function(t){return e.handleRemove(i.row.link_id,i.$index)}}},[e._v(" 删除 ")])]}}])})],1),t("el-dialog",{attrs:{title:"添加友情链接",visible:e.insert_dialog_visible},on:{"update:visible":function(t){e.insert_dialog_visible=t},close:function(t){return e.handleDialogClose("insert_form")}}},[t("el-form",{ref:"insert_form",attrs:{model:e.insert_form,rules:e.rules,"label-width":"80px"}},[t("el-form-item",{attrs:{label:"链接标题",prop:"title"}},[t("el-input",{model:{value:e.insert_form.title,callback:function(t){e.$set(e.insert_form,"title",t)},expression:"insert_form.title"}})],1),t("el-form-item",{attrs:{label:"链接地址",prop:"url"}},[t("el-input",{model:{value:e.insert_form.url,callback:function(t){e.$set(e.insert_form,"url",t)},expression:"insert_form.url"}})],1),t("el-form-item",{attrs:{label:"显示顺序",prop:"link_order"}},[t("el-input",{model:{value:e.insert_form.link_order,callback:function(t){e.$set(e.insert_form,"link_order",t)},expression:"insert_form.link_order"}})],1)],1),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.insert_dialog_visible=!1}}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary"},on:{click:e.handleInsert}},[e._v("添 加")])],1)],1),t("el-dialog",{attrs:{title:"编辑友情链接",visible:e.edit_dialog_visible},on:{"update:visible":function(t){e.edit_dialog_visible=t},close:function(t){return e.handleDialogClose("edit_form")}}},[t("el-form",{ref:"edit_form",attrs:{model:e.edit_form,rules:e.rules,"label-width":"80px"}},[t("el-form-item",{attrs:{label:"链接标题",prop:"title"}},[t("el-input",{model:{value:e.edit_form.title,callback:function(t){e.$set(e.edit_form,"title",t)},expression:"edit_form.title"}})],1),t("el-form-item",{attrs:{label:"链接地址",prop:"url"}},[t("el-input",{model:{value:e.edit_form.url,callback:function(t){e.$set(e.edit_form,"url",t)},expression:"edit_form.url"}})],1),t("el-form-item",{attrs:{label:"显示顺序",prop:"link_order"}},[t("el-input",{model:{value:e.edit_form.link_order,callback:function(t){e.$set(e.edit_form,"link_order",t)},expression:"edit_form.link_order"}})],1)],1),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.edit_dialog_visible=!1}}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary"},on:{click:e.handleEdit}},[e._v("保 存")])],1)],1)],1)},r=[],s=(i(7658),i(1803)),a={name:"List",data(){return{tableData:[],insert_dialog_visible:!1,insert_form:{title:"",url:"http://",link_order:""},edit_dialog_visible:!1,current_link:"",edit_form:{link_id:"",title:"",url:"",link_order:""},rules:{title:[{required:!0,message:"请填写标题文字",trigger:"blur"}],url:[{type:"url",required:!0,message:"请填写完整的链接地址",trigger:"blur"}],link_order:[{required:!0,message:"请填写显示顺序！",trigger:"blur"},{pattern:/^\d+$/,message:"顺序必须是数字组成！",trigger:"blur"}]}}},created(){document.title="友情链接列表",this.loadList()},methods:{async loadList(){let{status:e,msg:t,data:i}=await s.rU.list();e&&(this.tableData=i)},handleInsert(){this.$refs.insert_form.validate((async e=>{if(e){let{status:e,msg:t,data:i}=await s.rU.insert(this.insert_form);e?(this.tableData.push({...this.insert_form,...i}),this.tableData.sort(((e,t)=>e.link_order-t.link_order)),this.insert_dialog_visible=!1,this.$message.success(t)):this.$message.error(t)}}))},openEditDialog(e){this.current_link=e,this.edit_form={...e},this.edit_dialog_visible=!0},handleEdit(){this.$refs.edit_form.validate((async e=>{if(e){let{status:e,msg:t,data:i}=await s.rU.edit(this.edit_form.link_id,this.edit_form);e?(Object.assign(this.current_link,this.edit_form),this.edit_dialog_visible=!1,this.$message.success(t)):this.$message.error(t)}}))},async handleRemove(e,t){this.$confirm("此操作将永久删除该友情链接, 是否继续?",{type:"warning"}).then((async()=>{let{status:i,msg:l}=await s.rU.remove(e);i&&(this.tableData.splice(t,1),this.$message.success(l))})).catch((()=>{this.$message.info("取消成功")}))},handleSwitch(e){let{link_id:t,usable:i}=e;this.$confirm(`此操作将${1===i?"禁用":"启用"}该友情链接，是否继续？`,{type:"warning"}).then((async()=>{let{status:l,msg:r}=await s.rU.toggle({link_id:t,usable:-i});l&&(Object.assign(e,{usable:-i}),this.$message.success(r))})).catch((()=>{this.$message.info("取消成功")}))},handleDialogClose(e){this.$refs[e].resetFields()}}},o=a,n=i(1001),u=(0,n.Z)(o,l,r,!1,null,"04050b48",null),d=u.exports}}]);
//# sourceMappingURL=promotion-link.25690205.js.map
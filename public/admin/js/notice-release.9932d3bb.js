"use strict";(self["webpackChunkvue_cms_admin"]=self["webpackChunkvue_cms_admin"]||[]).push([[214],{3974:function(e,t,r){r.r(t),r.d(t,{default:function(){return c}});var s=function(){var e=this,t=e._self._c;return t("div",[t("el-card",{},[t("div",{attrs:{slot:"header"},slot:"header"},[t("span",[e._v("发布公告")])]),t("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"80px"}},[t("el-form-item",{attrs:{label:"标题",prop:"title"}},[t("el-input",{model:{value:e.form.title,callback:function(t){e.$set(e.form,"title",t)},expression:"form.title"}})],1),t("el-form-item",{attrs:{label:"置顶",prop:"is_sticky"}},[t("el-radio",{attrs:{label:1},model:{value:e.form.is_sticky,callback:function(t){e.$set(e.form,"is_sticky",t)},expression:"form.is_sticky"}},[e._v("是")]),t("el-radio",{attrs:{label:0},model:{value:e.form.is_sticky,callback:function(t){e.$set(e.form,"is_sticky",t)},expression:"form.is_sticky"}},[e._v("否")])],1),t("el-form-item",{attrs:{label:"内容",prop:"content"}},[t("div",{staticClass:"editor-box"},[t("Toolbar",{staticClass:"tool-bar",attrs:{editor:e.editor,defaultConfig:e.toolbarConfig,mode:e.mode}}),t("Editor",{staticClass:"editor",attrs:{defaultConfig:e.editorConfig,mode:e.mode},on:{onCreated:e.handleEditorCreated},model:{value:e.form.content,callback:function(t){e.$set(e.form,"content",t)},expression:"form.content"}})],1)]),t("el-form-item",[t("el-button",{attrs:{type:"primary"},on:{click:e.handleRelease}},[e._v("发布公告")])],1)],1)],1)],1)},o=[],i=r(1803),l=r(5660),a={name:"Release",components:{Editor:l.M,Toolbar:l.o},data(){return{form:{title:"",is_sticky:1,content:""},editor:null,toolbarConfig:{},mode:"simple",editorConfig:{placeholder:"请输入内容...",MENU_CONF:{uploadImage:{server:"/upload/editor/",fieldName:"file",headers:{Authorization:`Bearer ${sessionStorage.access_token}`}}}},rules:{title:[{type:"string",required:!0,message:"请输入公告标题",trigger:"blur"},{min:2,max:40,message:"公告标题长度在 2 到 40 个字符",trigger:"blur"}],is_sticky:[{type:"number",required:!0,message:"请选择是否置顶",trigger:"change"}],content:[{type:"string",required:!0,message:"请填写公告内容",trigger:"blur"}]}}},created(){document.title="发布公告"},methods:{handleEditorCreated(e){this.editor=Object.seal(e)},handleRelease(){this.$refs.form.validate((async e=>{if(e){let{status:e,msg:t}=await i.qX.release(this.form);e?(this.$message.success(t),this.$router.replace("/notice/list")):this.$message.error(t)}}))}}},n=a,d=r(1001),m=(0,d.Z)(n,s,o,!1,null,null,null),c=m.exports}}]);
//# sourceMappingURL=notice-release.9932d3bb.js.map
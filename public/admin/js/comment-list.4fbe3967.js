"use strict";(self["webpackChunkvue_cms_admin"]=self["webpackChunkvue_cms_admin"]||[]).push([[851],{2702:function(e,t,l){l.r(t),l.d(t,{default:function(){return p}});var r=function(){var e=this,t=e._self._c;return t("el-card",{},[t("div",{attrs:{slot:"header"},slot:"header"},[t("span",[e._v("评论列表")])]),t("el-table",{attrs:{data:e.tableData}},[t("el-table-column",{attrs:{prop:"comment_id",label:"#",width:"40"}}),t("el-table-column",{attrs:{prop:"article_title",label:"文章标题"},scopedSlots:e._u([{key:"default",fn:function(l){return[t("el-link",{attrs:{href:`/blog/article-detail.html?id=${l.row.article_id}`,target:"_blank"}},[e._v(" "+e._s(l.row.article_title)+" ")])]}}])}),t("el-table-column",{attrs:{prop:"user_nickname",label:"用户",width:"100"},scopedSlots:e._u([{key:"default",fn:function(l){return[t("el-link",{attrs:{href:"#",target:"_blank"}},[e._v(e._s(l.row.user_nickname))])]}}])}),t("el-table-column",{attrs:{prop:"content",label:"留言内容"}}),t("el-table-column",{attrs:{prop:"create_time",label:"留言日期",width:"150"}}),t("el-table-column",{attrs:{prop:"reply",label:"回复内容"}}),t("el-table-column",{attrs:{prop:"reply_time",label:"回复日期",width:"150"}}),t("el-table-column",{attrs:{label:"状态"},scopedSlots:e._u([{key:"default",fn:function(l){return[t("el-tag",{attrs:{type:1===l.row.is_visible?"success":"info"}},[e._v(" "+e._s(1===l.row.is_visible?"显示":"隐藏")+" ")])]}}])}),t("el-table-column",{attrs:{label:"操作",width:"180"},scopedSlots:e._u([{key:"default",fn:function(l){return[t("el-button",{attrs:{icon:"el-icon-edit",type:"primary",plain:""},on:{click:function(t){return e.openReplyDialog(l.row)}}},[e._v("回复")]),t("el-button",{attrs:{icon:"el-icon-switch-button",type:1===l.row.is_visible?"info":"success",plain:""},on:{click:function(t){return e.handleSwitch(l.row)}}},[e._v(" "+e._s(1===l.row.is_visible?"隐藏":"显示")+" ")])]}}])})],1),t("el-dialog",{attrs:{title:"回复评论",visible:e.reply_dialog_visible},on:{"update:visible":function(t){e.reply_dialog_visible=t},close:function(t){return e.handleDialogClose("reply_form")}}},[t("el-descriptions",{staticClass:"am-margin-bottom-xl",attrs:{border:"",direction:"vertical",column:2}},[t("el-descriptions-item",{attrs:{label:"评论用户"}},[t("el-link",{attrs:{href:"/#/",type:"primary"}},[e._v(e._s(e.reply_form.user_nickname))])],1),t("el-descriptions-item",{attrs:{label:"评论文章"}},[t("el-link",{attrs:{href:`/blog/article-detail.html?id=${e.reply_form.article_id}`,target:"_blank",type:"primary"}},[e._v(" "+e._s(e.reply_form.article_title)+" ")])],1),t("el-descriptions-item",{attrs:{label:"评论内容"}},[e._v(" "+e._s(e.reply_form.content)+" ")])],1),t("el-form",{ref:"reply_form",attrs:{model:e.reply_form,rules:e.rules}},[t("el-form-item",{attrs:{prop:"reply"}},[t("el-input",{attrs:{rows:4,type:"textarea",placeholder:"请在此输入回复的内容"},model:{value:e.reply_form.reply,callback:function(t){e.$set(e.reply_form,"reply",t)},expression:"reply_form.reply"}})],1)],1),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.reply_dialog_visible=!1}}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary"},on:{click:e.handleReply}},[e._v("回 复")])],1)],1)],1)},i=[],s=l(1803),a={name:"List",data(){return{tableData:[],reply_form:{comment_id:"",reply:""},reply_dialog_visible:!1,rules:{reply:[{required:!0,message:"请输入回复内容！",trigger:"blur"}]},current_row:""}},created(){document.title="评论列表",this.loadList()},methods:{async loadList(){let{status:e,data:t}=await s.sv.list();e&&(this.tableData=t)},openReplyDialog(e){this.reply_dialog_visible=!0,this.reply_form={...e},this.current_row=e},handleReply(){this.$refs.reply_form.validate((async e=>{if(e){let{status:e,msg:t}=await s.sv.reply(this.reply_form);e?(Object.assign(this.current_row,this.reply_form),this.reply_dialog_visible=!1,this.$message.success(t)):this.$message.error(t)}}))},handleSwitch(e){let{comment_id:t,is_visible:l}=e;this.$confirm(`此操作将${1===l?"隐藏":"显示"}该评论，是否继续？`,{type:"warning"}).then((async()=>{let{status:r,msg:i}=await s.sv.toggle({comment_id:t,visible:-l});r&&(Object.assign(e,{is_visible:-l}),this.$message.success(i))})).catch((()=>{this.$message.info("取消成功")}))},handleDialogClose(e){this.$refs[e].resetFields()}}},o=a,n=l(1001),c=(0,n.Z)(o,r,i,!1,null,"1e65bc81",null),p=c.exports}}]);
//# sourceMappingURL=comment-list.4fbe3967.js.map
"use strict";(self["webpackChunkvue_cms_admin"]=self["webpackChunkvue_cms_admin"]||[]).push([[929],{9229:function(e,t,r){r.r(t),r.d(t,{default:function(){return _}});var o=function(){var e=this,t=e._self._c;return t("el-card",{staticClass:"table-card"},[t("div",{staticClass:"header",attrs:{slot:"header"},slot:"header"},[t("span",[e._v("路由管理")])]),t("el-table",{attrs:{data:e.allRoutes,"row-key":"permission_id","expand-row-keys":["0"],border:""}},[t("el-table-column",{attrs:{prop:"route_name",label:"路由名称",width:"180"}}),t("el-table-column",{attrs:{prop:"route_id",label:"#"}}),t("el-table-column",{attrs:{prop:"route_title",label:"显示标题"}}),t("el-table-column",{attrs:{prop:"route_path",label:"路由地址",width:"120"}}),t("el-table-column",{attrs:{prop:"route_full_path",label:"完整路由地址",width:"180"}}),t("el-table-column",{attrs:{prop:"component_name",label:"组件名称"}}),t("el-table-column",{attrs:{prop:"component_path",label:"组件路径",width:"200"}}),t("el-table-column",{attrs:{prop:"route_alias",label:"路由别名"}}),t("el-table-column",{attrs:{prop:"permission_remark",label:"备注"}}),t("el-table-column",{attrs:{prop:"require_auth",label:"登录状态认证"}}),t("el-table-column",{attrs:{label:"操作",width:"280",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(r){return[t("el-button",{attrs:{disabled:0===r.row.permission_id,icon:"el-icon-edit",type:"primary",plain:""},on:{click:function(t){return e.openEditDialog(r.row)}}},[e._v(" 编辑 ")]),t("el-button",{attrs:{icon:"el-icon-circle-plus-outline",type:"success",plain:""},on:{click:function(t){return e.openInserDialog(r.row.permission_id,r.row)}}},[e._v(" 添加 ")]),t("el-button",{attrs:{disabled:0===r.row.permission_id,icon:"el-icon-delete",type:"danger",plain:""},on:{click:function(t){return e.handleRemoveRoute(r.row)}}},[e._v(" 删除 ")])]}}])})],1),t("el-dialog",{attrs:{title:"添加路由",visible:e.insert_dialog_visible},on:{"update:visible":function(t){e.insert_dialog_visible=t},close:function(t){return e.handleDialogClose("insert_form")}}},[t("el-form",{ref:"insert_form",attrs:{rules:e.rules,model:e.insert_form,"label-width":"150px"}},[t("el-form-item",{attrs:{label:"路由显示标题",prop:"route_title"}},[t("el-input",{attrs:{placeholder:"路由成为链接时显示的标题文字"},model:{value:e.insert_form.route_title,callback:function(t){e.$set(e.insert_form,"route_title",t)},expression:"insert_form.route_title"}})],1),t("el-form-item",{attrs:{label:"路由名称",prop:"route_name"}},[t("el-input",{attrs:{placeholder:"以大驼峰命名格式填写英文单词"},model:{value:e.insert_form.route_name,callback:function(t){e.$set(e.insert_form,"route_name",t)},expression:"insert_form.route_name"}})],1),t("el-form-item",{attrs:{label:"路由地址",prop:"route_path"}},[t("el-input",{attrs:{placeholder:"一级路由：以‘/route_path’格式填写，子级路由：以‘route_path’格式填写"},model:{value:e.insert_form.route_path,callback:function(t){e.$set(e.insert_form,"route_path",t)},expression:"insert_form.route_path"}})],1),t("el-form-item",{attrs:{label:"父级路由权限ID",prop:"parent_id"}},[t("el-input",{attrs:{readonly:""},model:{value:e.insert_form.parent_id,callback:function(t){e.$set(e.insert_form,"parent_id",t)},expression:"insert_form.parent_id"}})],1),t("el-form-item",{attrs:{label:"路由完整地址",prop:"route_full_path"}},[t("el-input",{attrs:{placeholder:"父级路由地址 + 自身地址叠加形成"},model:{value:e.insert_form.route_full_path,callback:function(t){e.$set(e.insert_form,"route_full_path",t)},expression:"insert_form.route_full_path"}})],1),t("el-form-item",{attrs:{label:"对应组件名称",prop:"component_name"}},[t("el-input",{attrs:{placeholder:"组件名称，以大驼峰命名格式填写英文单词"},model:{value:e.insert_form.component_name,callback:function(t){e.$set(e.insert_form,"component_name",t)},expression:"insert_form.component_name"}})],1),t("el-form-item",{attrs:{label:"组件相对路径",prop:"component_path"}},[t("el-input",{attrs:{placeholder:"vue文件的相对路径"},model:{value:e.insert_form.component_path,callback:function(t){e.$set(e.insert_form,"component_path",t)},expression:"insert_form.component_path"}})],1),t("el-form-item",{attrs:{label:"路由别名",prop:"route_alias"}},[t("el-input",{model:{value:e.insert_form.route_alias,callback:function(t){e.$set(e.insert_form,"route_alias",t)},expression:"insert_form.route_alias"}})],1),t("el-form-item",{attrs:{label:"是否认证登录状态",prop:"require_auth"}},[t("el-radio-group",{model:{value:e.insert_form.require_auth,callback:function(t){e.$set(e.insert_form,"require_auth",t)},expression:"insert_form.require_auth"}},[t("el-radio",{attrs:{label:1}},[e._v("需要认证")]),t("el-radio",{attrs:{label:0}},[e._v("对外公开")])],1)],1),t("el-form-item",{attrs:{label:"备注信息",prop:"permission_remark"}},[t("el-input",{attrs:{placeholder:"备注信息，同时作为权限备注"},model:{value:e.insert_form.permission_remark,callback:function(t){e.$set(e.insert_form,"permission_remark",t)},expression:"insert_form.permission_remark"}})],1)],1),t("div",{attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.insert_dialog_visible=!1}}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary"},on:{click:e.handleInsertRoute}},[e._v("确 定")])],1)],1),t("el-dialog",{attrs:{title:"编辑路由",visible:e.edit_dialog_visible},on:{"update:visible":function(t){e.edit_dialog_visible=t},close:function(t){return e.handleDialogClose("edit_form")}}},[t("el-form",{ref:"edit_form",attrs:{rules:e.rules,model:e.edit_form,"label-width":"150px"}},[t("el-form-item",{attrs:{label:"路由显示标题",prop:"route_title"}},[t("el-input",{attrs:{placeholder:"路由成为链接时显示的标题文字"},model:{value:e.edit_form.route_title,callback:function(t){e.$set(e.edit_form,"route_title",t)},expression:"edit_form.route_title"}})],1),t("el-form-item",{attrs:{label:"路由名称",prop:"route_name"}},[t("el-input",{attrs:{placeholder:"以大驼峰命名格式填写英文单词"},model:{value:e.edit_form.route_name,callback:function(t){e.$set(e.edit_form,"route_name",t)},expression:"edit_form.route_name"}})],1),t("el-form-item",{attrs:{label:"路由地址",prop:"route_path"}},[t("el-input",{attrs:{placeholder:"一级路由：以‘/route_path’格式填写，子级路由：以‘route_path’格式填写"},model:{value:e.edit_form.route_path,callback:function(t){e.$set(e.edit_form,"route_path",t)},expression:"edit_form.route_path"}})],1),t("el-form-item",{attrs:{label:"父级路由权限ID",prop:"parent_id"}},[t("el-input",{attrs:{readonly:""},model:{value:e.edit_form.parent_id,callback:function(t){e.$set(e.edit_form,"parent_id",t)},expression:"edit_form.parent_id"}})],1),t("el-form-item",{attrs:{label:"路由完整地址",prop:"route_full_path"}},[t("el-input",{attrs:{placeholder:"父级路由地址 + 自身地址叠加形成"},model:{value:e.edit_form.route_full_path,callback:function(t){e.$set(e.edit_form,"route_full_path",t)},expression:"edit_form.route_full_path"}})],1),t("el-form-item",{attrs:{label:"对应组件名称",prop:"component_name"}},[t("el-input",{attrs:{placeholder:"组件名称，以大驼峰命名格式填写英文单词"},model:{value:e.edit_form.component_name,callback:function(t){e.$set(e.edit_form,"component_name",t)},expression:"edit_form.component_name"}})],1),t("el-form-item",{attrs:{label:"组件相对路径",prop:"component_path"}},[t("el-input",{attrs:{placeholder:"vue文件的相对路径"},model:{value:e.edit_form.component_path,callback:function(t){e.$set(e.edit_form,"component_path",t)},expression:"edit_form.component_path"}})],1),t("el-form-item",{attrs:{label:"路由别名",prop:"route_alias"}},[t("el-input",{model:{value:e.edit_form.route_alias,callback:function(t){e.$set(e.edit_form,"route_alias",t)},expression:"edit_form.route_alias"}})],1),t("el-form-item",{attrs:{label:"是否认证登录状态",prop:"require_auth"}},[t("el-radio-group",{model:{value:e.edit_form.require_auth,callback:function(t){e.$set(e.edit_form,"require_auth",t)},expression:"edit_form.require_auth"}},[t("el-radio",{attrs:{label:1}},[e._v("需要认证")]),t("el-radio",{attrs:{label:0}},[e._v("对外公开")])],1)],1),t("el-form-item",{attrs:{label:"备注信息",prop:"permission_remark"}},[t("el-input",{attrs:{placeholder:"备注信息，同时作为权限备注"},model:{value:e.edit_form.permission_remark,callback:function(t){e.$set(e.edit_form,"permission_remark",t)},expression:"edit_form.permission_remark"}})],1)],1),t("div",{attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.edit_dialog_visible=!1}}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary"},on:{click:e.handleEditRoute}},[e._v("保 存")])],1)],1)],1)},l=[],i=r(629),a={name:"Route",data(){return{insert_dialog_visible:!1,edit_dialog_visible:!1,insert_form:{route_title:"",route_name:"",route_path:"",parent_id:"",route_full_path:"",component_name:"",component_path:"",route_alias:"",require_auth:1,permission_remark:""},edit_form:{route_title:"",route_name:"",route_path:"",parent_id:"",route_full_path:"",component_name:"",component_path:"",route_alias:"",require_auth:1,permission_remark:""},current_route:"",rules:{route_title:[{required:!1,message:"请输入路由成为链接时显示的标题文字",trigger:"blur"}],route_name:[{required:!0,message:"请输入路由名称，以大驼峰命名格式填写英文单词",trigger:"blur"}],route_path:[{required:!0,message:"请输入路由自身地址，一级路由：以‘/route_path’格式填写，子级路由：以‘route_path’格式填写",trigger:"blur"}],parent_id:[{required:!0,message:"请输入父级路由权限ID",trigger:"blur"}],route_full_path:[{required:!0,message:"请输入路由完整地址，父级路由地址 + 自身地址",trigger:"blur"}],component_name:[{required:!0,message:"请输入路由对应组件名称",trigger:"blur"}],component_path:[{required:!0,message:"请输入路由vue文件的相对路径",trigger:"blur"}],route_alias:[{required:!1,message:"请输入路由别名",trigger:"blur"}],require_auth:[{required:!0,message:"请选择是否认证登录状态",trigger:"change"}],permission_remark:[{required:!0,message:"请输入备注信息",trigger:"blur"}]}}},created(){document.title="路由管理",this.load_route_list({type:"flat"})},computed:{...(0,i.Se)("Route",["allRoutes"])},watch:{"insert_form.route_path"(e){let t,{route_full_path:r,permission_id:o}=this.current_route;0===o&&(t=e),o&&r&&(t=`${r}/${e}`),this.insert_form.route_full_path=t},"edit_form.route_path"(e){let t,{parent_id:r}=this.edit_form;if(0===r&&(t=e),r){let{route_full_path:r}=this.current_route,o=r.split("/");o.pop();let l=o.join("/");t=`${l}/${e}`}this.edit_form.route_full_path=t}},methods:{...(0,i.nv)("Route",["load_route_list","create_route","edit_route","remove_route"]),openInserDialog(e,t){this.insert_form.parent_id=e,this.current_route=t,this.insert_dialog_visible=!0},handleInsertRoute(){this.$refs.insert_form.validate((async e=>{if(e){let{status:e,msg:t}=await this.create_route({...this.insert_form});e?(this.insert_dialog_visible=!1,this.$message.success(t)):this.$message.error(t)}}))},openEditDialog(e){this.current_route=e,this.edit_form={...e},this.edit_dialog_visible=!0},handleEditRoute(){this.$refs.edit_form.validate((async e=>{if(e){let{status:e,msg:t}=await this.edit_route({...this.edit_form});e?(this.edit_dialog_visible=!1,this.$message.success(t)):this.$message.error(t)}}))},handleDialogClose(e){this.$refs[e].resetFields()},async handleRemoveRoute(e){e.children?.length?this.$message.error("拥有子级路由，不允许删除！"):this.$confirm("此操作将永久删除该路由, 是否继续?",{type:"warning"}).then((async()=>{let{status:t,msg:r}=await this.remove_route(e);t?this.$message.success(r):this.$message.error(r)})).catch((()=>{this.$message.info("取消成功！")}))}}},s=a,n=r(1001),u=(0,n.Z)(s,o,l,!1,null,"5dd2dbb9",null),_=u.exports}}]);
//# sourceMappingURL=auth-route.126deea3.js.map
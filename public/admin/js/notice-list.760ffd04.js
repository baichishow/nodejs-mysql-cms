"use strict";(self["webpackChunkvue_cms_admin"]=self["webpackChunkvue_cms_admin"]||[]).push([[755],{9420:function(t,e,s){s.r(e),s.d(e,{default:function(){return u}});var a=function(){var t=this,e=t._self._c;return e("el-card",{},[e("div",{attrs:{slot:"header"},slot:"header"},[e("span",[t._v("公告列表")])]),e("el-table",{attrs:{data:t.tableData}},[e("el-table-column",{attrs:{prop:"notice_id",label:"#",width:"40"}}),e("el-table-column",{attrs:{prop:"title",label:"标题",width:"250"}}),e("el-table-column",{attrs:{prop:"create_time",label:"发布日期"}}),e("el-table-column",{attrs:{prop:"update_time",label:"更新日期"}}),e("el-table-column",{attrs:{prop:"is_sticky",label:"是否置顶"},scopedSlots:t._u([{key:"default",fn:function(s){return[e("el-tag",{attrs:{type:s.row.is_sticky?"success":"info"}},[t._v(t._s(s.row.is_sticky?"置顶":"正常"))])]}}])}),e("el-table-column",{attrs:{label:"操作",width:"280"},scopedSlots:t._u([{key:"default",fn:function(s){return[e("el-link",{staticClass:"am-margin-right-sm",attrs:{href:`#/notice/edit/${s.row.notice_id}`,underline:!1,type:"primary"}},[e("el-button",{attrs:{icon:"el-icon-edit",type:"primary",plain:""}},[t._v("编辑")])],1),e("el-button",{attrs:{type:s.row.is_sticky?"info":"success",icon:s.row.is_sticky?"el-icon-video-pause":"el-icon-upload2",plain:""},on:{click:function(e){return t.handleStick(s.row)}}},[t._v(" "+t._s(s.row.is_sticky?"取消":"置顶")+" ")]),e("el-button",{attrs:{icon:"el-icon-delete",type:"danger",plain:""},on:{click:function(e){return t.handleRemove(s.row.notice_id,s.$index)}}},[t._v(" 删除 ")])]}}])})],1)],1)},i=[],n=s(1803),l={name:"List",data(){return{tableData:[]}},created(){document.title="公告列表",this.loadList()},methods:{async loadList(){let{status:t,data:e}=await n.qX.list();t&&(this.tableData=e)},handleStick(t){let{notice_id:e,is_sticky:s}=t;this.$confirm(`此操作将${1===s?"取消置顶":"置顶"}该公告，是否继续？`,{type:"warning"}).then((async()=>{s=1===s?0:1;let{status:a,msg:i}=await n.qX.stick({notice_id:e,is_sticky:s});a&&(Object.assign(t,{is_sticky:s}),this.$message.success(i))})).catch((()=>{this.$message.info("取消成功")}))},async handleRemove(t,e){this.$confirm("此操作将永久删除该公告, 是否继续?",{type:"warning"}).then((async()=>{let{status:s,msg:a}=await n.qX.remove({notice_id:t});s&&(this.tableData.splice(e,1),this.$message.success(a))})).catch((()=>{this.$message.info("取消成功")}))}}},c=l,o=s(1001),r=(0,o.Z)(c,a,i,!1,null,null,null),u=r.exports}}]);
//# sourceMappingURL=notice-list.760ffd04.js.map